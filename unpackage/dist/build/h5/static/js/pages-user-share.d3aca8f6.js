(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-share"],{1110:function(e,t,n){var a=n("53ef");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("4f06").default;r("1decdea6",a,!0,{sourceMap:!1,shadowMode:!1})},3482:function(e,t,n){"use strict";n.r(t);var a=n("cf63"),r=n("e47a");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("d761");var s,u=n("f0c5"),o=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,"1fa18a58",null,!1,a["a"],s);t["default"]=o.exports},"53ef":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".z-index-101[data-v-1fa18a58]{z-index:101}.mt-50[data-v-1fa18a58]{margin-top:%?-100?%}",""]),e.exports=t},"9e90":function(e,t,n){"use strict";(function(e){var a=n("ee27");n("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("d0af"));n("96cf");var i=a(n("c964")),s={methods:{share:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.HideModal(),a=e.currentTarget.dataset,r=a.provider,i=a.scene,n.t0=r,n.next="copy"===n.t0?5:"save"===n.t0?8:"qq"===n.t0?11:"weixin"===n.t0?14:17;break;case 5:return t.copy(i),t.isShare=!0,n.abrupt("break",18);case 8:return t.$uni.showLoading({title:t.i18n.generateImage}),setTimeout((function(){t.saveImageToPhotosAlbum()}),500),n.abrupt("break",18);case 11:return t.$uni.showLoading({title:t.i18n.generateImage}),setTimeout((function(){t.uniShare(r,i)}),500),n.abrupt("break",18);case 14:return t.$uni.showLoading({title:t.i18n.generateImage}),setTimeout((function(){t.uniShare(r,i)}),500),n.abrupt("break",18);case 17:return n.abrupt("break",18);case 18:case"end":return n.stop()}}),n)})))()},uniShare:function(e,t){var n=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var i,s,u,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.saveCapture();case 2:return i=a.sent,a.next=5,uni.share({provider:e,scene:t,type:2,imageUrl:i.target});case 5:s=a.sent,u=(0,r.default)(s,2),o=u[0],c=u[1],n.$uni.hideLoading(),c&&(n.ShareSuccess(),n.$uni.showToast({title:n.i18n.share+n.i18n.success,icon:"success"})),o&&(n.$uni.showToast({title:n.i18n.share+n.i18n.error}),n.isShare=!0);case 12:case"end":return a.stop()}}),a)})))()},saveImageToPhotosAlbum:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n,a,i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveCapture();case 2:return n=t.sent,t.next=5,uni.saveImageToPhotosAlbum({filePath:n.target});case 5:a=t.sent,i=(0,r.default)(a,2),s=i[0],u=i[1],u&&e.$uni.showToast({title:e.i18n.save+e.i18n.image+e.i18n.success,icon:"success"}),s&&(e.$uni.showToast({title:e.i18n.save+e.i18n.image+e.i18n.error}),e.isShare=!0);case 11:case"end":return t.stop()}}),t)})))()},saveCapture:function(){var e=this;return new Promise(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(n,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.createBitmap();case 3:return t.next=5,e.saveBitmap();case 5:r=t.sent,e.bitmap.clear(),e.isShare=!0,n(r),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$uni.showToast({title:e.i18n.save+e.i18n.image+e.i18n.error}),e.isShare=!0,a(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())},createBitmap:function(){var t=this;return new Promise((function(n,a){t.bitmap=new plus.nativeObj.Bitmap("invite");var r=t.$mp.page.$getAppWebview(),i=t.StatusBar,s=t.safeArea.height;r.draw(t.bitmap,(function(){n()}),(function(t){a(t),e.log("截屏绘制图片失败")}),{clip:{top:"".concat(i,"px"),left:"0px",width:"100%",height:"".concat(s,"px")}})}))},saveBitmap:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_doc/share.jpg";return new Promise((function(a,r){t.bitmap.save(n,{overwrite:!0,quality:100},(function(e){a(e)}),(function(n){t.isShare=!0,r(n),e.log("保存图片失败")}))}))}}};t.default=s}).call(this,n("5a52")["default"])},c513:function(e,t,n){"use strict";var a=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=a(n("c964")),i=(n("2f62"),a(n("50db"))),s=a(n("9e90")),u=a(n("2e8a")),o={mixins:[s.default],data:function(){return{code:"",icon:"/static/wallet/qrCode-img.png",qrcode:"",isShare:!0,qrImg:""}},onLoad:function(){this.getData()},components:{"cu-custom":u.default,"tki-qrcode":i.default},methods:{getData:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("user.share");case 2:n=t.sent,a=n.data,r=a.userinfo,i=a.src,e.code=r.code,e.qrcode=i;case 8:case"end":return t.stop()}}),t)})))()},result:function(e){this.qrImg=e},saveIamge:function(e){this.qrImg?(this.isShare=!1,this.share(e)):uni.showToast({title:this.i18n.tip,icon:"none"})}}};t.default=o},cf63:function(e,t,n){"use strict";var a={cuCustom:n("2e8a").default,tkiQrcode:n("50db").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"share clearfix flex-text flex-v hv100"},[n("cu-custom",{attrs:{bgColor:"bg-transparent",isBack:e.isShare}},[n("template",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.i18n.title))])],2),n("v-uni-image",{staticClass:"wp100 hv100 fixed fixed-top",attrs:{src:"/static/user/share-bg.png",mode:""}}),n("v-uni-view",{staticClass:"relative z-index-101 flex-text flex-v mt-50"},[n("v-uni-image",{staticClass:"block65",attrs:{src:"/static/user/touxiang@2x.png",mode:""}}),n("v-uni-view",{staticClass:"f22 mt30"},[e._v(e._s(e.i18n.text))]),n("v-uni-view",{staticClass:"f12 mt30"},[e._v(e._s(e.i18n.code))]),n("v-uni-view",{staticClass:"color-theme f24 h35 flex-text"},[e._v(e._s(e.code))]),n("v-uni-view",{staticClass:"px10 py10 bg-white mt5"},[n("tki-qrcode",{ref:"qrcode",attrs:{cid:"qrcode",val:e.qrcode,onval:!0,icon:e.icon,size:280,loadMake:!0,showLoading:!1},on:{result:function(t){arguments[0]=t=e.$handleEvent(t),e.result.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"f12 mt5"},[e._v(e._s(e.i18n.scanTxt))]),n("v-uni-view",{staticClass:"bg-theme color-black h35 radius-5 w80 flex-text f12 mt40",attrs:{"data-provider":"save","data-scene":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveIamge.apply(void 0,arguments)}}},[e._v(e._s(e.i18n.btnTxt))])],1)],1)},i=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}))},d0af:function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}n.r(t);n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function r(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)if(n.push(s.value),t&&n.length===t)break}catch(o){r=!0,i=o}finally{try{a||null==u["return"]||u["return"]()}finally{if(r)throw i}}return n}}var i=n("dde1");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return a(e)||r(e,t)||Object(i["a"])(e,t)||s()}n.d(t,"default",(function(){return u}))},d761:function(e,t,n){"use strict";var a=n("1110"),r=n.n(a);r.a},e47a:function(e,t,n){"use strict";n.r(t);var a=n("c513"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a}}]);